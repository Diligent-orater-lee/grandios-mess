import{a as ce,b as de,c as me,d as se,e as Ce,f as _e,g as ue,h as fe,i as he,j as xe,k as Me,l as be,m as Pe,n as Oe,o as ye,p as ve,q as L}from"./chunk-FTS5RGYW.js";import{a as S,b as T}from"./chunk-MZQ6FVZR.js";import{a as pe,b as ge}from"./chunk-OEABJX5Z.js";import{c as q}from"./chunk-63PAYZU4.js";import"./chunk-4JD22T3T.js";import{a as ne,c as ie,d as oe}from"./chunk-JUUJTUIL.js";import"./chunk-B64C44VI.js";import{a as j}from"./chunk-Q2E4Q4SZ.js";import"./chunk-VNQ7BZ4B.js";import"./chunk-3MHNROPV.js";import"./chunk-SIEO27HX.js";import{a as v,b as w}from"./chunk-PCTXAYZW.js";import{C as te,m as W,o as G,p as J,q as K,r as Q,t as X,u as Y,w as Z,z as ee}from"./chunk-YNQLZI4D.js";import{$ as u,$b as H,Da as l,E as I,Fb as A,Gb as B,H as z,Na as b,Ra as p,Rb as d,Va as s,_a as g,ab as F,bb as U,cb as i,db as o,eb as P,fb as O,gb as y,ha as f,i as E,ia as h,ib as x,kb as C,kc as $,kd as ae,lb as c,md as re,oa as V,od as le,ta as R,wa as D,wb as a,xb as N,yb as M}from"./chunk-DVSZTQYN.js";var Le=(n,e)=>e.type;function Ee(n,e){if(n&1&&(i(0,"div",1)(1,"mat-icon",2),a(2),o(),i(3,"span",3),a(4),o()()),n&2){let t=e.$implicit,r=c();s("matTooltip",r.getTooltipText(t.meal,t.label)),l(),s("color",r.getMealColor(t.meal)),l(),M(" ",r.getMealIcon(t.meal)," "),l(2),N(t.label)}}var k=class n{daySchedule=R.required();breakfast=d(()=>this.daySchedule().meals.find(e=>e.meal==="BREAKFAST"));lunch=d(()=>this.daySchedule().meals.find(e=>e.meal==="LUNCH"));dinner=d(()=>this.daySchedule().meals.find(e=>e.meal==="DINNER"));meals=d(()=>[{meal:this.breakfast(),type:"BREAKFAST",icon:"free_breakfast",label:"Breakfast"},{meal:this.lunch(),type:"LUNCH",icon:"lunch_dining",label:"Lunch"},{meal:this.dinner(),type:"DINNER",icon:"dinner_dining",label:"Dinner"}]);getMealIcon(e){return e?.optedIn?"check_circle":"cancel"}getMealColor(e){return e?.optedIn?"primary":"warn"}getTooltipText(e,t){return e?e.optedIn?`${t}: Opted in`:`${t}: Not opted in`:`${t}: Not available`}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=b({type:n,selectors:[["app-meals-view"]],inputs:{daySchedule:[1,"daySchedule"]},decls:3,vars:0,consts:[[1,"meals-container"],["matTooltipPosition","above",1,"meal-item",3,"matTooltip"],[1,"meal-icon",3,"color"],[1,"meal-label"]],template:function(t,r){t&1&&(i(0,"div",0),F(1,Ee,5,4,"div",1,Le),o()),t&2&&(l(),U(r.meals()))},dependencies:[w,v,T,S],styles:[".meals-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;padding:8px;min-width:120px}.meal-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:2px 4px;border-radius:4px;transition:background-color .2s ease}.meal-item[_ngcontent-%COMP%]:hover{background-color:#0000000a}.meal-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;line-height:16px}.meal-label[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#000000de;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:80px}@media (max-width: 768px){.meals-container[_ngcontent-%COMP%]{min-width:100px;padding:4px}.meal-item[_ngcontent-%COMP%]{gap:4px}.meal-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px;line-height:14px}.meal-label[_ngcontent-%COMP%]{font-size:11px;max-width:60px}}"],changeDetection:0})};var Ie=()=>[5,10,20,50];function ze(n,e){if(n&1){let t=x();i(0,"div",2)(1,"button",11),C("click",function(){f(t);let m=c();return h(m.navigateToDeliveryUsers())}),i(2,"mat-icon"),a(3,"local_shipping"),o(),a(4," View Delivery Users "),o(),i(5,"button",12),C("click",function(){f(t);let m=c();return h(m.openAddUserDialog())}),i(6,"mat-icon"),a(7,"person_add"),o(),a(8," Add New Client "),o()()}}function Ve(n,e){if(n&1&&(i(0,"div",8)(1,"mat-icon",13),a(2,"error"),o(),a(3),o()),n&2){let t=c();l(3),M(" ",t.error()," ")}}function Re(n,e){n&1&&(i(0,"div",9),P(1,"mat-spinner",14),i(2,"p"),a(3,"Loading clients..."),o()())}function Fe(n,e){n&1&&(i(0,"th",25),a(1,"Full Name"),o())}function Ue(n,e){if(n&1&&(i(0,"td",26),a(1),o()),n&2){let t=e.$implicit;l(),M(" ",t.name||"N/A"," ")}}function Ne(n,e){n&1&&(i(0,"th",25),a(1,"Meals Today"),o())}function Ae(n,e){if(n&1&&(i(0,"td",26),P(1,"app-meals-view",27),o()),n&2){let t=e.$implicit;l(),s("daySchedule",t.todayMeals)}}function Be(n,e){n&1&&(i(0,"th",25),a(1,"Actions"),o())}function He(n,e){if(n&1){let t=x();i(0,"td",26)(1,"button",28),C("click",function(m){let _=f(t).$implicit;return c(2).viewClientCalendar(_),h(m.stopPropagation())}),i(2,"mat-icon"),a(3,"calendar_today"),o()()()}}function $e(n,e){n&1&&P(0,"tr",29)}function je(n,e){if(n&1){let t=x();i(0,"tr",30),C("click",function(){let m=f(t).$implicit,_=c(2);return h(_.viewClientCalendar(m))}),o()}}function qe(n,e){if(n&1){let t=x();i(0,"mat-paginator",31),C("page",function(m){f(t);let _=c(2);return h(_.onPageChange(m))}),o()}if(n&2){let t=c(2);s("length",t.pagination().total)("pageSize",t.pagination().limit)("pageIndex",t.pagination().page-1)("pageSizeOptions",B(5,Ie))("showFirstLastButtons",!0)}}function We(n,e){if(n&1&&(i(0,"div",15)(1,"table",16),O(2,17),p(3,Fe,2,0,"th",18)(4,Ue,2,1,"td",19),y(),O(5,20),p(6,Ne,2,0,"th",18)(7,Ae,2,1,"td",19),y(),O(8,21),p(9,Be,2,0,"th",18)(10,He,4,0,"td",19),y(),p(11,$e,1,0,"tr",22)(12,je,1,0,"tr",23),o()(),p(13,qe,1,6,"mat-paginator",24)),n&2){let t=c();l(),s("dataSource",t.clients()),l(10),s("matHeaderRowDef",t.displayedColumns()),l(),s("matRowDefColumns",t.displayedColumns()),l(),g(t.pagination()?13:-1)}}function Ge(n,e){n&1&&a(0," No clients match your search criteria. Try adjusting your search terms. ")}function Je(n,e){n&1&&a(0," There are no clients to display at the moment. ")}function Ke(n,e){if(n&1&&(i(0,"div",10)(1,"mat-icon",32),a(2,"people_outline"),o(),i(3,"h3"),a(4,"No clients found"),o(),i(5,"p"),p(6,Ge,1,0)(7,Je,1,0),o()()),n&2){let t=c();l(6),g(t.searchTerm()?6:7)}}var we=class n{userStore=u(L);authStore=u(q);destroyRef=u(V);router=u($);dialog=u(ce);searchSubject=new E;searchTerm=D("");displayedColumns=D(["name","mealsToday","actions"]);clients=d(()=>this.userStore.clients());pagination=d(()=>this.userStore.clientsPagination());loading=d(()=>this.userStore.loading());error=d(()=>this.userStore.error());currentUser=d(()=>this.authStore.user());isAdmin=d(()=>this.currentUser()?.userType==="ADMIN");constructor(){this.searchSubject.pipe(I(300),z(),j(this.destroyRef)).subscribe(e=>{this.userStore.setSearchTerm(e),this.loadClients()})}ngOnInit(){this.loadClients()}onSearchChange(e){let t=e.target;this.searchTerm.set(t.value),this.searchSubject.next(t.value)}onPageChange(e){this.userStore.setCurrentPage(e.pageIndex+1),this.userStore.setPageSize(e.pageSize),this.loadClients()}onRefresh(){this.loadClients()}loadClients(){let e={page:this.userStore.currentPage(),limit:this.userStore.pageSize(),search:this.userStore.searchTerm()||void 0};this.userStore.loadClients(e)}formatDate(e){return new Date(e).toLocaleDateString()}viewClientCalendar(e){this.router.navigate(["/calendar",e.id])}navigateToDeliveryUsers(){this.router.navigate(["/delivery"])}openAddUserDialog(){this.dialog.open(ve,{width:"500px",maxWidth:"90vw",disableClose:!1,data:{userType:"CLIENT"}}).afterClosed().subscribe(t=>{t&&this.loadClients()})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=b({type:n,selectors:[["app-client-list"]],features:[A([L])],decls:26,vars:7,consts:[[1,"client-list-container"],[1,"client-list-card"],[1,"navigation-actions-bar"],[1,"search-actions-bar"],["appearance","outline",1,"search-field"],["matInput","","type","text","placeholder","Search by username, email, or name...",3,"input","value"],["matSuffix",""],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"error-message"],[1,"loading-container"],[1,"empty-state"],["mat-stroked-button","","color","primary",1,"nav-button",3,"click"],["mat-raised-button","","color","accent",1,"add-user-button",3,"click"],["color","warn"],["diameter","40"],[1,"table-container"],["mat-table","",1,"clients-table",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","mealsToday"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","clickable-row",3,"click",4,"matRowDef","matRowDefColumns"],[1,"pagination",3,"length","pageSize","pageIndex","pageSizeOptions","showFirstLastButtons"],["mat-header-cell",""],["mat-cell",""],[3,"daySchedule"],["mat-icon-button","","color","primary","matTooltip","View Calendar","aria-label","View client calendar",3,"click"],["mat-header-row",""],["mat-row","",1,"clickable-row",3,"click"],[1,"pagination",3,"page","length","pageSize","pageIndex","pageSizeOptions","showFirstLastButtons"],[1,"empty-icon"]],template:function(t,r){t&1&&(i(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title")(4,"mat-icon"),a(5,"people"),o(),a(6," Client List "),o(),i(7,"mat-card-subtitle"),a(8," Manage and view client users "),o()(),i(9,"mat-card-content"),p(10,ze,9,0,"div",2),i(11,"div",3)(12,"mat-form-field",4)(13,"mat-label"),a(14,"Search clients"),o(),i(15,"input",5),C("input",function(_){return r.onSearchChange(_)}),o(),i(16,"mat-icon",6),a(17,"search"),o()(),i(18,"button",7),C("click",function(){return r.onRefresh()}),i(19,"mat-icon"),a(20,"refresh"),o(),a(21," Refresh "),o()(),p(22,Ve,4,1,"div",8)(23,Re,4,0,"div",9)(24,We,14,4)(25,Ke,8,1,"div",10),o()()()),t&2&&(l(10),g(r.isAdmin()?10:-1),l(5),s("value",r.searchTerm()),l(3),s("disabled",r.loading()),l(4),g(r.error()?22:-1),l(),g(r.loading()?23:-1),l(),g(!r.loading()&&r.clients().length>0?24:-1),l(),g(!r.loading()&&r.clients().length===0&&!r.error()?25:-1))},dependencies:[H,W,ye,Ce,ue,Me,fe,_e,be,he,xe,Pe,Oe,se,me,oe,ie,te,Z,ee,ne,w,v,le,re,ae,Y,G,K,X,Q,J,ge,pe,T,S,de,k],styles:[".client-list-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}.client-list-card[_ngcontent-%COMP%]{box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f;border-radius:12px;overflow:hidden}mat-card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;margin:-24px -24px 24px;padding:24px}mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-size:1.5rem;font-weight:600;margin:0}mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.75rem;width:1.75rem;height:1.75rem}mat-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{color:#fffc;margin:8px 0 0;font-size:1rem}.navigation-actions-bar[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center;margin-bottom:24px;flex-wrap:wrap}.navigation-actions-bar[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%], .navigation-actions-bar[_ngcontent-%COMP%]   .add-user-button[_ngcontent-%COMP%]{height:40px;min-width:180px}.navigation-actions-bar[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .navigation-actions-bar[_ngcontent-%COMP%]   .add-user-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.navigation-actions-bar[_ngcontent-%COMP%]   .add-user-button[_ngcontent-%COMP%]{background-color:#ff9800;color:#fff}.navigation-actions-bar[_ngcontent-%COMP%]   .add-user-button[_ngcontent-%COMP%]:hover{background-color:#f57c00}.search-actions-bar[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center;margin-bottom:24px;flex-wrap:wrap}.search-actions-bar[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{flex:1;min-width:300px}.search-actions-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:56px;min-width:120px}.search-actions-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:16px;background-color:#ffebee;border:1px solid #ffcdd2;border-radius:8px;color:#c62828;margin-bottom:16px}.error-message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.25rem;width:1.25rem;height:1.25rem}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;gap:16px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:1rem}.table-container[_ngcontent-%COMP%]{overflow-x:auto;border-radius:8px;border:1px solid #e0e0e0;margin-bottom:16px}.clients-table[_ngcontent-%COMP%]{width:100%;background:#fff}.clients-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f5f5f5;font-weight:600;color:#333;border-bottom:2px solid #e0e0e0;text-align:center}.clients-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #f0f0f0;text-align:center}.clients-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.clients-table[_ngcontent-%COMP%]   .username-cell[_ngcontent-%COMP%], .clients-table[_ngcontent-%COMP%]   .email-cell[_ngcontent-%COMP%], .clients-table[_ngcontent-%COMP%]   .date-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.clients-table[_ngcontent-%COMP%]   .username-cell[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .clients-table[_ngcontent-%COMP%]   .email-cell[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .clients-table[_ngcontent-%COMP%]   .date-cell[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1rem;width:1rem;height:1rem;color:#666}.clients-table[_ngcontent-%COMP%]   .user-icon[_ngcontent-%COMP%]{color:#2196f3!important}.clients-table[_ngcontent-%COMP%]   .email-icon[_ngcontent-%COMP%]{color:#ff9800!important}.clients-table[_ngcontent-%COMP%]   .date-icon[_ngcontent-%COMP%]{color:#4caf50!important}.user-type-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:16px;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.user-type-badge.user-type-admin[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2}.user-type-badge.user-type-client[_ngcontent-%COMP%]{background-color:#e8f5e8;color:#388e3c}.user-type-badge.user-type-delivery[_ngcontent-%COMP%]{background-color:#fff3e0;color:#f57c00}.pagination[_ngcontent-%COMP%]{margin-top:16px;border-top:1px solid #e0e0e0;padding-top:16px}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;text-align:center}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:4rem;width:4rem;height:4rem;color:#ccc;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#666;font-size:1.25rem;font-weight:500}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#999;font-size:1rem;max-width:400px;line-height:1.5}@media (max-width: 768px){.client-list-container[_ngcontent-%COMP%]{padding:16px}.navigation-actions-bar[_ngcontent-%COMP%], .search-actions-bar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.navigation-actions-bar[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%], .search-actions-bar[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{min-width:unset}.clients-table[_ngcontent-%COMP%]{font-size:.875rem}.username-cell[_ngcontent-%COMP%], .email-cell[_ngcontent-%COMP%], .date-cell[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:4px}.username-cell[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .email-cell[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .date-cell[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:none}}@media (max-width: 480px){mat-card-header[_ngcontent-%COMP%]{padding:16px}mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:1.25rem}mat-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{font-size:.875rem}.clients-table[_ngcontent-%COMP%]{font-size:.75rem}.user-type-badge[_ngcontent-%COMP%]{font-size:.625rem;padding:2px 8px}}.clickable-row[_ngcontent-%COMP%]{cursor:pointer;transition:background-color .2s ease}.clickable-row[_ngcontent-%COMP%]:hover{background-color:#0000000a}.clickable-row[_ngcontent-%COMP%]:active{background-color:#00000014}"],changeDetection:0})};export{we as ClientListComponent};
