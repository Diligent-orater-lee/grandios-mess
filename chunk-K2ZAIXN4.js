import{a as ot,b as ct,c as lt,d as pt}from"./chunk-AK2SL3EW.js";import{a as Y,b as q}from"./chunk-AHEYB7OC.js";import{a as Z,c as tt,d as et,f as nt}from"./chunk-WJWMP2Y4.js";import{a as G,b as J}from"./chunk-EET5BPVW.js";import{c as W}from"./chunk-CRZ3OVUA.js";import{a as rt}from"./chunk-WNGK4DYB.js";import{a as Q,b as X}from"./chunk-IWXIOI3N.js";import"./chunk-4QIPNNPE.js";import"./chunk-YZ65L6JL.js";import"./chunk-FQDDMH5W.js";import{a as it,b as at}from"./chunk-IXVEEKHG.js";import{a as w,b as k}from"./chunk-4XHAB7ED.js";import{o as j,p as A,q as K,r as R,s as U,t as H,u as S}from"./chunk-SK66EAOT.js";import{$ as u,$a as N,Da as l,Na as h,Ra as D,Rb as s,Va as g,_a as _,ab as E,bb as L,cb as i,db as a,eb as B,ha as M,hd as v,ia as f,ib as O,kb as m,kc as $,lb as d,md as z,nd as V,od as b,sa as x,ta as y,vb as F,wb as r,xb as P,yb as C}from"./chunk-UCDLZYA7.js";var Ct=(o,e)=>e.id;function ut(o,e){o&1&&(i(0,"div",1),B(1,"mat-spinner",5),i(2,"p"),r(3,"Loading patterns..."),a()())}function Mt(o,e){if(o&1&&(i(0,"mat-card",2)(1,"mat-card-content")(2,"div",6)(3,"mat-icon",7),r(4,"error"),a(),i(5,"span"),r(6),a()()()()),o&2){let t=d();l(6),P(t.error())}}function ft(o,e){if(o&1){let t=O();i(0,"mat-card",3)(1,"mat-card-content")(2,"div",8)(3,"mat-icon"),r(4,"pattern"),a(),i(5,"h3"),r(6,"No Patterns Found"),a(),i(7,"p"),r(8,"Create your first meal pattern to get started with automated meal scheduling."),a(),i(9,"button",9),m("click",function(){M(t);let c=d();return f(c.onCreateNew())}),i(10,"mat-icon"),r(11,"add"),a(),r(12," Create First Pattern "),a()()()()}}function Pt(o,e){if(o&1&&(i(0,"mat-chip",16)(1,"mat-icon"),r(2,"restaurant"),a(),r(3),a()),o&2){let t=e.$implicit,n=d(4);g("color","accent"),l(3),C(" ",n.getMealTypeLabel(t)," ")}}function xt(o,e){if(o&1){let t=O();i(0,"mat-card",15)(1,"mat-card-header")(2,"mat-card-title"),r(3),a(),i(4,"mat-card-subtitle")(5,"mat-chip-set")(6,"mat-chip",16),r(7),a()()()(),i(8,"mat-card-content")(9,"div",17),r(10),a(),i(11,"div",18)(12,"mat-icon"),r(13,"schedule"),a(),r(14),a(),i(15,"div",19),E(16,Pt,4,2,"mat-chip",16,N),a()(),i(18,"mat-card-actions")(19,"button",20)(20,"mat-icon"),r(21,"more_vert"),a()(),i(22,"mat-menu",null,0)(24,"button",21),m("click",function(){let c=M(t).$implicit,p=d(3);return f(p.onEdit(c))}),i(25,"mat-icon"),r(26,"edit"),a(),r(27," Edit "),a(),i(28,"button",22),m("click",function(){let c=M(t).$implicit,p=d(3);return f(p.onDelete(c.id))}),i(29,"mat-icon"),r(30,"delete"),a(),r(31," Delete "),a()()()()}if(o&2){let t=e.$implicit,n=F(23),c=d(3);l(3),P(t.name),l(3),g("color","primary"),l(),C(" ",c.getPatternKindLabel(t.rule.kind)," "),l(3),C(" ",c.getPatternDescription(t)," "),l(4),C(" ",c.getDateRangeText(t)," "),l(2),L(t.rule.meals),l(3),g("matMenuTriggerFor",n)("matTooltip","More actions")}}function yt(o,e){if(o&1&&(i(0,"div",10)(1,"h3",13)(2,"mat-icon"),r(3,"check_circle"),a(),r(4),a(),i(5,"div",14),E(6,xt,32,7,"mat-card",15,Ct),a()()),o&2){let t=d(2);l(4),C(" Active Patterns (",t.activePatterns().length,") "),l(2),L(t.activePatterns())}}function ht(o,e){if(o&1){let t=O();i(0,"div",4),D(1,yt,8,1,"div",10),i(2,"div",11)(3,"button",12),m("click",function(){M(t);let c=d();return f(c.onCreateNew())}),i(4,"mat-icon"),r(5,"add"),a()()()()}if(o&2){let t=d();l(),_(t.activePatterns().length>0?1:-1),l(2),g("matTooltip","Create new pattern")}}var T=class o{patterns=y([]);loading=y(!1);error=y(null);edit=x();delete=x();createNew=x();hasPatterns=s(()=>this.patterns().length>0);activePatterns=s(()=>this.patterns().filter(e=>e.active));inactivePatterns=s(()=>this.patterns().filter(e=>!e.active));getPatternKindLabel(e){return{DAILY:"Daily",WEEKDAYS:"Weekdays",WEEKENDS:"Weekends",SPECIFIC_WEEKDAYS:"Specific Days"}[e]}getMealTypeLabel(e){return{BREAKFAST:"Breakfast",LUNCH:"Lunch",DINNER:"Dinner"}[e]}getWeekdayLabels(e){let t=["","Mon","Tue","Wed","Thu","Fri","Sat","Sun"];return e.map(n=>t[n]).filter(Boolean)}getPatternDescription(e){let{kind:t,meals:n,isoWeekdays:c}=e.rule,p=n.map(I=>this.getMealTypeLabel(I)).join(", ");switch(t){case"DAILY":return`Every day: ${p}`;case"WEEKDAYS":return`Monday-Friday: ${p}`;case"WEEKENDS":return`Saturday-Sunday: ${p}`;case"SPECIFIC_WEEKDAYS":return`${this.getWeekdayLabels(c||[]).join(", ")}: ${p}`;default:return p}}getDateRangeText(e){let{startDateISO:t,endDateISO:n}=e,c=t?new Date(t).toLocaleDateString():"Unknown";if(n){let p=new Date(n).toLocaleDateString();return`${c} - ${p}`}return`From ${c}`}onEdit(e){this.edit.emit(e)}onDelete(e){this.delete.emit(e)}onCreateNew(){this.createNew.emit()}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=h({type:o,selectors:[["app-pattern-list"]],inputs:{patterns:[1,"patterns"],loading:[1,"loading"],error:[1,"error"]},outputs:{edit:"edit",delete:"delete",createNew:"createNew"},decls:4,vars:4,consts:[["menu","matMenu"],[1,"loading-container"],["appearance","outlined",1,"error-card"],["appearance","outlined",1,"empty-state"],[1,"patterns-container"],["diameter","32"],[1,"error-content"],["color","warn"],[1,"empty-content"],["mat-raised-button","","color","primary",3,"click"],[1,"patterns-section"],[1,"create-button-container"],["mat-fab","","color","primary",3,"click","matTooltip"],[1,"section-title"],[1,"patterns-grid"],["appearance","outlined",1,"pattern-card","active"],[3,"color"],[1,"pattern-description"],[1,"pattern-dates"],[1,"pattern-meals"],["mat-icon-button","",3,"matMenuTriggerFor","matTooltip"],["mat-menu-item","",3,"click"],["mat-menu-item","",1,"delete-action",3,"click"]],template:function(t,n){t&1&&D(0,ut,4,0,"div",1)(1,Mt,7,1,"mat-card",2)(2,ft,13,0,"mat-card",3)(3,ht,6,2,"div",4),t&2&&(_(n.loading()?0:-1),l(),_(n.error()?1:-1),l(),_(!n.loading()&&!n.error()&&!n.hasPatterns()?2:-1),l(),_(!n.loading()&&!n.error()&&n.hasPatterns()?3:-1))},dependencies:[b,z,v,V,S,j,U,K,H,R,A,et,Z,tt,k,w,pt,ct,ot,lt,J,G,nt,q,Y],styles:[".loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px 24px;text-align:center}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#0009}.error-card[_ngcontent-%COMP%]{margin:16px 0}.error-card[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;color:#d32f2f}.empty-state[_ngcontent-%COMP%]{margin:16px 0}.empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px 24px;text-align:center}.empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#0000004d;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#000000de}.empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 24px;color:#0009;max-width:400px}.patterns-container[_ngcontent-%COMP%]   .patterns-section[_ngcontent-%COMP%]{margin:24px 0}.patterns-container[_ngcontent-%COMP%]   .patterns-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin:0 0 16px;color:#000000de;font-weight:500}.patterns-container[_ngcontent-%COMP%]   .patterns-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.patterns-container[_ngcontent-%COMP%]   .patterns-section[_ngcontent-%COMP%]   .patterns-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:16px}.pattern-card[_ngcontent-%COMP%]{transition:all .3s ease;position:relative}.pattern-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.pattern-card.active[_ngcontent-%COMP%]{border-left:4px solid #4caf50}.pattern-card.inactive[_ngcontent-%COMP%]{border-left:4px solid #ff9800;opacity:.8}.pattern-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding-bottom:8px}.pattern-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:500;margin-bottom:4px}.pattern-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{margin-top:4px}.pattern-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .pattern-description[_ngcontent-%COMP%]{margin:12px 0;color:#000000de;font-weight:500}.pattern-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .pattern-dates[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin:8px 0;color:#0009;font-size:.875rem}.pattern-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .pattern-dates[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.pattern-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .pattern-meals[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin:12px 0}.pattern-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .pattern-meals[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{font-size:.75rem}.pattern-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .pattern-meals[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px}.pattern-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:8px 16px 16px}.pattern-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   .delete-action[_ngcontent-%COMP%]{color:#d32f2f}.create-button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:32px 0;padding:16px}.create-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:fixed;bottom:24px;right:24px;z-index:1000}@media (max-width: 768px){.patterns-grid[_ngcontent-%COMP%]{grid-template-columns:1fr!important}.create-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:fixed;bottom:16px;right:16px}}@media (max-width: 480px){.pattern-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .pattern-meals[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}"],changeDetection:0})};var dt=class o{router=u($);patternsStore=u(rt);authStore=u(W);snackBar=u(Q);title="Meal Patterns";description="Manage your meal patterns and preferences";patterns=s(()=>this.patternsStore.patterns());loading=s(()=>this.patternsStore.loading());error=s(()=>this.patternsStore.error());currentUser=s(()=>this.authStore.user());isAdmin=s(()=>this.currentUser()?.userType==="ADMIN");constructor(){this.patternsStore.loadPatterns()}goBack(){this.router.navigate(["/"])}onCreateNew(){this.router.navigate(["/patterns/edit/new"])}onEdit(e){this.router.navigate(["/patterns/edit",e.id])}onDelete(e){confirm("Are you sure you want to delete this pattern?")&&(this.patternsStore.deletePattern(e),this.showSuccessMessage("Pattern deleted successfully"))}showSuccessMessage(e){this.snackBar.open(e,"Close",{duration:3e3,horizontalPosition:"right",verticalPosition:"top"})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=h({type:o,selectors:[["app-patterns"]],decls:14,vars:4,consts:[["color","primary",1,"toolbar"],[1,"left"],["mat-icon-button","","aria-label","Back",3,"click"],[1,"center"],[1,"title"],[1,"right"],["mat-icon-button","","aria-label","Create New Pattern",3,"click"],[1,"content"],[3,"edit","delete","createNew","patterns","loading","error"]],template:function(t,n){t&1&&(i(0,"mat-toolbar",0)(1,"div",1)(2,"button",2),m("click",function(){return n.goBack()}),i(3,"mat-icon"),r(4,"arrow_back"),a()()(),i(5,"div",3)(6,"span",4),r(7),a()(),i(8,"div",5)(9,"button",6),m("click",function(){return n.onCreateNew()}),i(10,"mat-icon"),r(11,"add"),a()()()(),i(12,"section",7)(13,"app-pattern-list",8),m("edit",function(p){return n.onEdit(p)})("delete",function(p){return n.onDelete(p)})("createNew",function(){return n.onCreateNew()}),a()()),t&2&&(l(7),P(n.title),l(6),g("patterns",n.patterns())("loading",n.loading())("error",n.error()))},dependencies:[b,v,S,k,w,at,it,X,T],styles:[".toolbar[_ngcontent-%COMP%]{position:sticky;top:0;z-index:10}.toolbar[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .toolbar[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.toolbar[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:center}.toolbar[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:500}.content[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto;min-height:calc(100vh - 64px)}@media (max-width: 768px){.content[_ngcontent-%COMP%]{padding:16px}}"],changeDetection:0})};export{dt as PatternsComponent};
