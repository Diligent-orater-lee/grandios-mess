import{a as lt,b as dt,c as pt,d as st}from"./chunk-7YN7VOOC.js";import{a as J,b as Q}from"./chunk-ZWOJZ5M2.js";import{a as tt,c as et,d as nt}from"./chunk-GZ5GJFJT.js";import{a as X,b as Z}from"./chunk-FSWTEG3C.js";import{c as z}from"./chunk-WH5ENMYL.js";import{a as rt,b as ct,c as N}from"./chunk-JZ2QGZOO.js";import"./chunk-7GHZ3MWM.js";import"./chunk-WYMUA7GE.js";import{c as it}from"./chunk-SAFZIUV2.js";import{a as at,b as ot}from"./chunk-AVZWLIBO.js";import{a as k,b as E}from"./chunk-AGVB3H5I.js";import{p as j,q as K,r as R,s as U,t as H,u as Y,v as S}from"./chunk-B7N7L4RO.js";import{$ as P,$a as I,Da as l,Fb as $,Na as b,Ra as L,Sb as g,Va as _,Xb as B,_a as x,ab as v,bb as y,cb as n,db as e,eb as V,ha as u,ia as C,ib as h,jd as w,kb as s,lb as p,lc as W,ld as q,md as G,nd as T,sa as M,ta as O,vb as F,wb as a,xb as f,yb as m}from"./chunk-H6CP2TP5.js";var mt=(r,i)=>i.id;function Pt(r,i){r&1&&(n(0,"div",1),V(1,"mat-spinner",5),n(2,"p"),a(3,"Loading patterns..."),e()())}function ft(r,i){if(r&1&&(n(0,"mat-card",2)(1,"mat-card-content")(2,"div",6)(3,"mat-icon",7),a(4,"error"),e(),n(5,"span"),a(6),e()()()()),r&2){let t=p();l(6),f(t.error())}}function Mt(r,i){if(r&1){let t=h();n(0,"mat-card",3)(1,"mat-card-content")(2,"div",8)(3,"mat-icon"),a(4,"pattern"),e(),n(5,"h3"),a(6,"No Patterns Found"),e(),n(7,"p"),a(8,"Create your first meal pattern to get started with automated meal scheduling."),e(),n(9,"button",9),s("click",function(){u(t);let c=p();return C(c.onCreateNew())}),n(10,"mat-icon"),a(11,"add"),e(),a(12," Create First Pattern "),e()()()()}}function vt(r,i){if(r&1&&(n(0,"mat-chip",16)(1,"mat-icon"),a(2,"restaurant"),e(),a(3),e()),r&2){let t=i.$implicit,o=p(4);_("color","accent"),l(3),m(" ",o.getMealTypeLabel(t)," ")}}function yt(r,i){if(r&1){let t=h();n(0,"mat-card",15)(1,"mat-card-header")(2,"mat-card-title"),a(3),e(),n(4,"mat-card-subtitle")(5,"mat-chip-set")(6,"mat-chip",16),a(7),e()()()(),n(8,"mat-card-content")(9,"div",17),a(10),e(),n(11,"div",18)(12,"mat-icon"),a(13,"schedule"),e(),a(14),e(),n(15,"div",19),v(16,vt,4,2,"mat-chip",16,I),e()(),n(18,"mat-card-actions")(19,"button",20)(20,"mat-icon"),a(21,"more_vert"),e()(),n(22,"mat-menu",null,0)(24,"button",21),s("click",function(){let c=u(t).$implicit,d=p(3);return C(d.onEdit(c))}),n(25,"mat-icon"),a(26,"edit"),e(),a(27," Edit "),e(),n(28,"button",21),s("click",function(){let c=u(t).$implicit,d=p(3);return C(d.onToggleActive(c))}),n(29,"mat-icon"),a(30,"pause"),e(),a(31," Deactivate "),e(),n(32,"button",22),s("click",function(){let c=u(t).$implicit,d=p(3);return C(d.onDelete(c.id))}),n(33,"mat-icon"),a(34,"delete"),e(),a(35," Delete "),e()()()()}if(r&2){let t=i.$implicit,o=F(23),c=p(3);l(3),f(t.name),l(3),_("color","primary"),l(),m(" ",c.getPatternKindLabel(t.rule.kind)," "),l(3),m(" ",c.getPatternDescription(t)," "),l(4),m(" ",c.getDateRangeText(t)," "),l(2),y(t.rule.meals),l(3),_("matMenuTriggerFor",o)("matTooltip","More actions")}}function ht(r,i){if(r&1&&(n(0,"div",10)(1,"h3",13)(2,"mat-icon"),a(3,"check_circle"),e(),a(4),e(),n(5,"div",14),v(6,yt,36,7,"mat-card",15,mt),e()()),r&2){let t=p(2);l(4),m(" Active Patterns (",t.activePatterns().length,") "),l(2),y(t.activePatterns())}}function Ot(r,i){if(r&1&&(n(0,"mat-chip",16)(1,"mat-icon"),a(2,"restaurant"),e(),a(3),e()),r&2){let t=i.$implicit,o=p(4);_("color","accent"),l(3),m(" ",o.getMealTypeLabel(t)," ")}}function bt(r,i){if(r&1){let t=h();n(0,"mat-card",23)(1,"mat-card-header")(2,"mat-card-title"),a(3),e(),n(4,"mat-card-subtitle")(5,"mat-chip-set")(6,"mat-chip",16),a(7),e()()()(),n(8,"mat-card-content")(9,"div",17),a(10),e(),n(11,"div",18)(12,"mat-icon"),a(13,"schedule"),e(),a(14),e(),n(15,"div",19),v(16,Ot,4,2,"mat-chip",16,I),e()(),n(18,"mat-card-actions")(19,"button",20)(20,"mat-icon"),a(21,"more_vert"),e()(),n(22,"mat-menu",null,0)(24,"button",21),s("click",function(){let c=u(t).$implicit,d=p(3);return C(d.onEdit(c))}),n(25,"mat-icon"),a(26,"edit"),e(),a(27," Edit "),e(),n(28,"button",21),s("click",function(){let c=u(t).$implicit,d=p(3);return C(d.onToggleActive(c))}),n(29,"mat-icon"),a(30,"play_arrow"),e(),a(31," Activate "),e(),n(32,"button",22),s("click",function(){let c=u(t).$implicit,d=p(3);return C(d.onDelete(c.id))}),n(33,"mat-icon"),a(34,"delete"),e(),a(35," Delete "),e()()()()}if(r&2){let t=i.$implicit,o=F(23),c=p(3);l(3),f(t.name),l(3),_("color","warn"),l(),m(" ",c.getPatternKindLabel(t.rule.kind)," "),l(3),m(" ",c.getPatternDescription(t)," "),l(4),m(" ",c.getDateRangeText(t)," "),l(2),y(t.rule.meals),l(3),_("matMenuTriggerFor",o)("matTooltip","More actions")}}function St(r,i){if(r&1&&(n(0,"div",10)(1,"h3",13)(2,"mat-icon"),a(3,"pause_circle"),e(),a(4),e(),n(5,"div",14),v(6,bt,36,7,"mat-card",23,mt),e()()),r&2){let t=p(2);l(4),m(" Inactive Patterns (",t.inactivePatterns().length,") "),l(2),y(t.inactivePatterns())}}function wt(r,i){if(r&1){let t=h();n(0,"div",4),L(1,ht,8,1,"div",10)(2,St,8,1,"div",10),n(3,"div",11)(4,"button",12),s("click",function(){u(t);let c=p();return C(c.onCreateNew())}),n(5,"mat-icon"),a(6,"add"),e()()()()}if(r&2){let t=p();l(),x(t.activePatterns().length>0?1:-1),l(),x(t.inactivePatterns().length>0?2:-1),l(2),_("matTooltip","Create new pattern")}}var D=class r{patterns=O([]);loading=O(!1);error=O(null);edit=M();delete=M();toggleActive=M();createNew=M();hasPatterns=g(()=>this.patterns().length>0);activePatterns=g(()=>this.patterns().filter(i=>i.active));inactivePatterns=g(()=>this.patterns().filter(i=>!i.active));getPatternKindLabel(i){return{DAILY:"Daily",WEEKDAYS:"Weekdays",WEEKENDS:"Weekends",SPECIFIC_WEEKDAYS:"Specific Days"}[i]}getMealTypeLabel(i){return{BREAKFAST:"Breakfast",LUNCH:"Lunch",DINNER:"Dinner"}[i]}getWeekdayLabels(i){let t=["","Mon","Tue","Wed","Thu","Fri","Sat","Sun"];return i.map(o=>t[o]).filter(Boolean)}getPatternDescription(i){let{kind:t,meals:o,isoWeekdays:c}=i.rule,d=o.map(A=>this.getMealTypeLabel(A)).join(", ");switch(t){case"DAILY":return`Every day: ${d}`;case"WEEKDAYS":return`Monday-Friday: ${d}`;case"WEEKENDS":return`Saturday-Sunday: ${d}`;case"SPECIFIC_WEEKDAYS":return`${this.getWeekdayLabels(c||[]).join(", ")}: ${d}`;default:return d}}getDateRangeText(i){let{startDateISO:t,endDateISO:o}=i,c=t?new Date(t).toLocaleDateString():"Unknown";if(o){let d=new Date(o).toLocaleDateString();return`${c} - ${d}`}return`From ${c}`}onEdit(i){this.edit.emit(i)}onDelete(i){this.delete.emit(i)}onToggleActive(i){this.toggleActive.emit({id:i.id,active:!i.active})}onCreateNew(){this.createNew.emit()}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=b({type:r,selectors:[["app-pattern-list"]],inputs:{patterns:[1,"patterns"],loading:[1,"loading"],error:[1,"error"]},outputs:{edit:"edit",delete:"delete",toggleActive:"toggleActive",createNew:"createNew"},decls:4,vars:4,consts:[["menu","matMenu"],[1,"loading-container"],["appearance","outlined",1,"error-card"],["appearance","outlined",1,"empty-state"],[1,"patterns-container"],["diameter","32"],[1,"error-content"],["color","warn"],[1,"empty-content"],["mat-raised-button","","color","primary",3,"click"],[1,"patterns-section"],[1,"create-button-container"],["mat-fab","","color","primary",3,"click","matTooltip"],[1,"section-title"],[1,"patterns-grid"],["appearance","outlined",1,"pattern-card","active"],[3,"color"],[1,"pattern-description"],[1,"pattern-dates"],[1,"pattern-meals"],["mat-icon-button","",3,"matMenuTriggerFor","matTooltip"],["mat-menu-item","",3,"click"],["mat-menu-item","",1,"delete-action",3,"click"],["appearance","outlined",1,"pattern-card","inactive"]],template:function(t,o){t&1&&L(0,Pt,4,0,"div",1)(1,ft,7,1,"mat-card",2)(2,Mt,13,0,"mat-card",3)(3,wt,7,3,"div",4),t&2&&(x(o.loading()?0:-1),l(),x(o.error()?1:-1),l(),x(!o.loading()&&!o.error()&&!o.hasPatterns()?2:-1),l(),x(!o.loading()&&!o.error()&&o.hasPatterns()?3:-1))},dependencies:[T,q,w,G,S,j,H,R,Y,U,K,nt,tt,et,E,k,st,dt,lt,pt,Z,X,it,Q,J],styles:[".loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px 24px;text-align:center}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#0009}.error-card[_ngcontent-%COMP%]{margin:16px 0}.error-card[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;color:#d32f2f}.empty-state[_ngcontent-%COMP%]{margin:16px 0}.empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px 24px;text-align:center}.empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#0000004d;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#000000de}.empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 24px;color:#0009;max-width:400px}.patterns-container[_ngcontent-%COMP%]   .patterns-section[_ngcontent-%COMP%]{margin:24px 0}.patterns-container[_ngcontent-%COMP%]   .patterns-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin:0 0 16px;color:#000000de;font-weight:500}.patterns-container[_ngcontent-%COMP%]   .patterns-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.patterns-container[_ngcontent-%COMP%]   .patterns-section[_ngcontent-%COMP%]   .patterns-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:16px}.pattern-card[_ngcontent-%COMP%]{transition:all .3s ease;position:relative}.pattern-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.pattern-card.active[_ngcontent-%COMP%]{border-left:4px solid #4caf50}.pattern-card.inactive[_ngcontent-%COMP%]{border-left:4px solid #ff9800;opacity:.8}.pattern-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding-bottom:8px}.pattern-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:500;margin-bottom:4px}.pattern-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{margin-top:4px}.pattern-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .pattern-description[_ngcontent-%COMP%]{margin:12px 0;color:#000000de;font-weight:500}.pattern-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .pattern-dates[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin:8px 0;color:#0009;font-size:.875rem}.pattern-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .pattern-dates[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.pattern-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .pattern-meals[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin:12px 0}.pattern-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .pattern-meals[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{font-size:.75rem}.pattern-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .pattern-meals[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px}.pattern-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:8px 16px 16px}.pattern-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   .delete-action[_ngcontent-%COMP%]{color:#d32f2f}.create-button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:32px 0;padding:16px}.create-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:fixed;bottom:24px;right:24px;z-index:1000}@media (max-width: 768px){.patterns-grid[_ngcontent-%COMP%]{grid-template-columns:1fr!important}.create-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:fixed;bottom:16px;right:16px}}@media (max-width: 480px){.pattern-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .pattern-meals[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}"],changeDetection:0})};var _t=class r{location=P(B);router=P(W);patternsStore=P(N);authStore=P(z);snackBar=P(rt);title="Meal Patterns";description="Manage your meal patterns and preferences";patterns=g(()=>this.patternsStore.patterns());loading=g(()=>this.patternsStore.loading());error=g(()=>this.patternsStore.error());currentUser=g(()=>this.authStore.user());isAdmin=g(()=>this.currentUser()?.userType==="ADMIN");constructor(){this.patternsStore.loadPatterns()}goBack(){this.location.back()}onCreateNew(){this.router.navigate(["/patterns/edit/new"])}onEdit(i){this.router.navigate(["/patterns/edit",i.id])}onDelete(i){confirm("Are you sure you want to delete this pattern?")&&(this.patternsStore.deletePattern(i),this.showSuccessMessage("Pattern deleted successfully"))}onToggleActive(i){this.patternsStore.togglePatternActive(i),this.showSuccessMessage(i.active?"Pattern activated":"Pattern deactivated")}showSuccessMessage(i){this.snackBar.open(i,"Close",{duration:3e3,horizontalPosition:"right",verticalPosition:"top"})}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=b({type:r,selectors:[["app-patterns"]],features:[$([N])],decls:14,vars:4,consts:[["color","primary",1,"toolbar"],[1,"left"],["mat-icon-button","","aria-label","Back",3,"click"],[1,"center"],[1,"title"],[1,"right"],["mat-icon-button","","aria-label","Create New Pattern",3,"click"],[1,"content"],[3,"edit","delete","toggleActive","createNew","patterns","loading","error"]],template:function(t,o){t&1&&(n(0,"mat-toolbar",0)(1,"div",1)(2,"button",2),s("click",function(){return o.goBack()}),n(3,"mat-icon"),a(4,"arrow_back"),e()()(),n(5,"div",3)(6,"span",4),a(7),e()(),n(8,"div",5)(9,"button",6),s("click",function(){return o.onCreateNew()}),n(10,"mat-icon"),a(11,"add"),e()()()(),n(12,"section",7)(13,"app-pattern-list",8),s("edit",function(d){return o.onEdit(d)})("delete",function(d){return o.onDelete(d)})("toggleActive",function(d){return o.onToggleActive(d)})("createNew",function(){return o.onCreateNew()}),e()()),t&2&&(l(7),f(o.title),l(6),_("patterns",o.patterns())("loading",o.loading())("error",o.error()))},dependencies:[T,w,S,E,k,ot,at,ct,D],styles:[".toolbar[_ngcontent-%COMP%]{position:sticky;top:0;z-index:10}.toolbar[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .toolbar[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.toolbar[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:center}.toolbar[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:500}.content[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto;min-height:calc(100vh - 64px)}@media (max-width: 768px){.content[_ngcontent-%COMP%]{padding:16px}}"],changeDetection:0})};export{_t as PatternsComponent};
