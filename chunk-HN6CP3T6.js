import{B as c,W as p,_ as s,bc as g,d as l,dc as d,lc as i,mc as u,oc as P,pc as f,q as m,qc as h}from"./chunk-7KD5NMWA.js";var o=class e{http=s(d);apiUrl=h.apiUrl;constructor(){}getDeliveryUsers(t={}){let a=this.buildHttpParams(t);return this.http.get(`${this.apiUrl}/users/delivery`,{params:a}).pipe(c(r=>(console.error("Get delivery users error:",r),m(()=>r))))}getClientUsers(t={}){let a=this.buildHttpParams(t);return this.http.get(`${this.apiUrl}/users/clients`,{params:a}).pipe(c(r=>(console.error("Get client users error:",r),m(()=>r))))}buildHttpParams(t){let a=new g;return t.page!==void 0&&(a=a.set("page",t.page.toString())),t.limit!==void 0&&(a=a.set("limit",t.limit.toString())),t.search&&(a=a.set("search",t.search)),a}static \u0275fac=function(a){return new(a||e)};static \u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"})};var v={clients:[],delivery:[],clientsPagination:null,deliveryPagination:null,loading:!1,error:null,searchTerm:"",currentPage:1,pageSize:10},D=u(f(v),P(e=>{let t=s(o);return{loadClients(){return l(this,arguments,function*(r={}){i(e,{loading:!0,error:null});try{let n=yield t.getClientUsers(r).toPromise();n&&i(e,{clients:n.data,clientsPagination:n.pagination,loading:!1,error:null})}catch(n){i(e,{loading:!1,error:n.error?.message||"Failed to load clients"})}})},loadDeliveryUsers(){return l(this,arguments,function*(r={}){i(e,{loading:!0,error:null});try{let n=yield t.getDeliveryUsers(r).toPromise();n&&i(e,{delivery:n.data,deliveryPagination:n.pagination,loading:!1,error:null})}catch(n){i(e,{loading:!1,error:n.error?.message||"Failed to load delivery users"})}})},setSearchTerm(r){i(e,{searchTerm:r,currentPage:1})},setCurrentPage(r){i(e,{currentPage:r})},setPageSize(r){i(e,{pageSize:r,currentPage:1})},clearError(){i(e,{error:null})},reset(){i(e,v)}}}));export{D as a};
