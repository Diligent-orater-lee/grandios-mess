import{a as ae,b as re,c as le,d as ce,e as de,f as pe,g as ge,h as Ce,i as _e,j as ue,k as fe,l as he,m as xe,n as Me,o as be,p as Pe,q as L}from"./chunk-R3SMWYVH.js";import{a as S,b as T}from"./chunk-PMMMHKJJ.js";import{a as se,b as me}from"./chunk-Z2JHOIV2.js";import{c as q}from"./chunk-CBRL5BY5.js";import"./chunk-4NVTSZSC.js";import{a as ne,c as ie,d as oe}from"./chunk-RA24DYYF.js";import"./chunk-WNLY4DJN.js";import{a as H}from"./chunk-TFRYWLHQ.js";import"./chunk-LDYQDQJX.js";import"./chunk-MMSBK3T6.js";import"./chunk-QCBPZIUR.js";import{a as v,b as w}from"./chunk-CUC7IE2D.js";import{C as te,m as W,o as Q,q as X,u as Y,w as Z,z as ee}from"./chunk-GGJ6J7I6.js";import{$a as F,Ca as l,D as I,Eb as A,Fb as j,G as z,Ma as P,Qa as p,Qb as s,Ua as m,Za as g,_ as u,_b as B,ab as U,bb as o,cb as i,db as x,eb as y,fb as O,ga as f,gd as G,ha as h,hb as M,i as E,jb as _,jc as $,kb as c,ld as J,na as V,nd as K,sa as R,va as D,vb as a,wb as N,xb as b}from"./chunk-7KD5NMWA.js";var Te=(n,e)=>e.type;function ke(n,e){if(n&1&&(o(0,"div",1)(1,"mat-icon",2),a(2),i(),o(3,"span",3),a(4),i()()),n&2){let t=e.$implicit,r=c();m("matTooltip",r.getTooltipText(t.meal,t.label)),l(),m("color",r.getMealColor(t.meal)),l(),b(" ",r.getMealIcon(t.meal)," "),l(2),N(t.label)}}var k=class n{daySchedule=R.required();breakfast=s(()=>this.daySchedule().meals.find(e=>e.meal==="BREAKFAST"));lunch=s(()=>this.daySchedule().meals.find(e=>e.meal==="LUNCH"));dinner=s(()=>this.daySchedule().meals.find(e=>e.meal==="DINNER"));meals=s(()=>[{meal:this.breakfast(),type:"BREAKFAST",icon:"free_breakfast",label:"Breakfast"},{meal:this.lunch(),type:"LUNCH",icon:"lunch_dining",label:"Lunch"},{meal:this.dinner(),type:"DINNER",icon:"dinner_dining",label:"Dinner"}]);getMealIcon(e){return e?.optedIn?"check_circle":"cancel"}getMealColor(e){return e?.optedIn?"primary":"warn"}getTooltipText(e,t){return e?e.optedIn?`${t}: Opted in`:`${t}: Not opted in`:`${t}: Not available`}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=P({type:n,selectors:[["app-meals-view"]],inputs:{daySchedule:[1,"daySchedule"]},decls:3,vars:0,consts:[[1,"meals-container"],["matTooltipPosition","above",1,"meal-item",3,"matTooltip"],[1,"meal-icon",3,"color"],[1,"meal-label"]],template:function(t,r){t&1&&(o(0,"div",0),F(1,ke,5,4,"div",1,Te),i()),t&2&&(l(),U(r.meals()))},dependencies:[w,v,T,S],styles:[".meals-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;padding:8px;min-width:120px}.meal-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:2px 4px;border-radius:4px;transition:background-color .2s ease}.meal-item[_ngcontent-%COMP%]:hover{background-color:#0000000a}.meal-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;line-height:16px}.meal-label[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#000000de;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:80px}@media (max-width: 768px){.meals-container[_ngcontent-%COMP%]{min-width:100px;padding:4px}.meal-item[_ngcontent-%COMP%]{gap:4px}.meal-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px;line-height:14px}.meal-label[_ngcontent-%COMP%]{font-size:11px;max-width:60px}}"],changeDetection:0})};var De=()=>[5,10,20,50];function Le(n,e){if(n&1){let t=M();o(0,"div",2)(1,"button",10),_("click",function(){f(t);let d=c();return h(d.navigateToDeliveryUsers())}),o(2,"mat-icon"),a(3,"local_shipping"),i(),a(4," View Delivery Users "),i(),o(5,"button",11),_("click",function(){f(t);let d=c();return h(d.openAddUserDialog())}),o(6,"mat-icon"),a(7,"person_add"),i(),a(8," Add New Client "),i()()}}function Ee(n,e){if(n&1&&(o(0,"div",7)(1,"mat-icon",12),a(2,"error"),i(),a(3),i()),n&2){let t=c();l(3),b(" ",t.error()," ")}}function Ie(n,e){n&1&&(o(0,"div",8),x(1,"mat-spinner",13),o(2,"p"),a(3,"Loading clients..."),i()())}function ze(n,e){n&1&&(o(0,"th",24),a(1,"Full Name"),i())}function Ve(n,e){if(n&1&&(o(0,"td",25),a(1),i()),n&2){let t=e.$implicit;l(),b(" ",t.name||"N/A"," ")}}function Re(n,e){n&1&&(o(0,"th",24),a(1,"Meals"),i())}function Fe(n,e){if(n&1&&(o(0,"td",25)(1,"div",26)(2,"div",27)(3,"h3"),a(4,"Today"),i(),x(5,"app-meals-view",28),i(),o(6,"div",27)(7,"h3"),a(8,"Tomorrow"),i(),x(9,"app-meals-view",28),i()()()),n&2){let t=e.$implicit;l(5),m("daySchedule",t.todayMeals),l(4),m("daySchedule",t.tomorrowMeals)}}function Ue(n,e){n&1&&(o(0,"th",24),a(1,"Actions"),i())}function Ne(n,e){if(n&1){let t=M();o(0,"td",25)(1,"button",29),_("click",function(d){let C=f(t).$implicit;return c(2).viewClientCalendar(C),h(d.stopPropagation())}),o(2,"mat-icon"),a(3,"calendar_today"),i()()()}}function Ae(n,e){n&1&&x(0,"tr",30)}function je(n,e){if(n&1){let t=M();o(0,"tr",31),_("click",function(){let d=f(t).$implicit,C=c(2);return h(C.viewClientCalendar(d))}),i()}}function Be(n,e){if(n&1){let t=M();o(0,"mat-paginator",32),_("page",function(d){f(t);let C=c(2);return h(C.onPageChange(d))}),i()}if(n&2){let t=c(2);m("length",t.pagination().total)("pageSize",t.pagination().limit)("pageIndex",t.pagination().page-1)("pageSizeOptions",j(5,De))("showFirstLastButtons",!0)}}function $e(n,e){if(n&1&&(o(0,"div",14)(1,"table",15),y(2,16),p(3,ze,2,0,"th",17)(4,Ve,2,1,"td",18),O(),y(5,19),p(6,Re,2,0,"th",17)(7,Fe,10,2,"td",18),O(),y(8,20),p(9,Ue,2,0,"th",17)(10,Ne,4,0,"td",18),O(),p(11,Ae,1,0,"tr",21)(12,je,1,0,"tr",22),i()(),p(13,Be,1,6,"mat-paginator",23)),n&2){let t=c();l(),m("dataSource",t.clients()),l(10),m("matHeaderRowDef",t.displayedColumns()),l(),m("matRowDefColumns",t.displayedColumns()),l(),g(t.pagination()?13:-1)}}function He(n,e){n&1&&a(0," No clients match your search criteria. Try adjusting your search terms. ")}function qe(n,e){n&1&&a(0," There are no clients to display at the moment. ")}function We(n,e){if(n&1&&(o(0,"div",9)(1,"mat-icon",33),a(2,"people_outline"),i(),o(3,"h3"),a(4,"No clients found"),i(),o(5,"p"),p(6,He,1,0)(7,qe,1,0),i()()),n&2){let t=c();l(6),g(t.searchTerm()?6:7)}}var ye=class n{userStore=u(L);authStore=u(q);destroyRef=u(V);router=u($);dialog=u(ae);searchSubject=new E;searchTerm=D("");displayedColumns=D(["name","mealsToday"]);clients=s(()=>this.userStore.clients());pagination=s(()=>this.userStore.clientsPagination());loading=s(()=>this.userStore.loading());error=s(()=>this.userStore.error());currentUser=s(()=>this.authStore.user());isAdmin=s(()=>this.currentUser()?.userType==="ADMIN");constructor(){this.searchSubject.pipe(I(300),z(),H(this.destroyRef)).subscribe(e=>{this.userStore.setSearchTerm(e),this.loadClients()})}ngOnInit(){this.loadClients()}onSearchChange(e){let t=e.target;this.searchTerm.set(t.value),this.searchSubject.next(t.value)}onPageChange(e){this.userStore.setCurrentPage(e.pageIndex+1),this.userStore.setPageSize(e.pageSize),this.loadClients()}onRefresh(){this.loadClients()}loadClients(){let e={page:this.userStore.currentPage(),limit:this.userStore.pageSize(),search:this.userStore.searchTerm()||void 0};this.userStore.loadClients(e)}formatDate(e){return new Date(e).toLocaleDateString()}viewClientCalendar(e){this.router.navigate(["/calendar",e.id])}navigateToDeliveryUsers(){this.router.navigate(["/delivery"])}openAddUserDialog(){this.dialog.open(Pe,{width:"500px",maxWidth:"90vw",disableClose:!1,data:{userType:"CLIENT"}}).afterClosed().subscribe(t=>{t&&this.loadClients()})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=P({type:n,selectors:[["app-client-list"]],features:[A([L])],decls:15,vars:6,consts:[[1,"client-list-container"],[1,"client-list-card"],[1,"navigation-actions-bar"],[1,"search-actions-bar"],["appearance","outline",1,"search-field"],["matInput","","type","text","placeholder","Search by username, email, or name...",3,"input","value"],["matSuffix",""],[1,"error-message"],[1,"loading-container"],[1,"empty-state"],["mat-stroked-button","","color","primary",1,"nav-button",3,"click"],["mat-raised-button","","color","accent",1,"add-user-button",3,"click"],["color","warn"],["diameter","40"],[1,"table-container"],["mat-table","",1,"clients-table",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","mealsToday"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","clickable-row",3,"click",4,"matRowDef","matRowDefColumns"],[1,"pagination",3,"length","pageSize","pageIndex","pageSizeOptions","showFirstLastButtons"],["mat-header-cell",""],["mat-cell",""],[1,"meals-config"],[1,"config"],[3,"daySchedule"],["mat-icon-button","","color","primary","matTooltip","View Calendar","aria-label","View client calendar",3,"click"],["mat-header-row",""],["mat-row","",1,"clickable-row",3,"click"],[1,"pagination",3,"page","length","pageSize","pageIndex","pageSizeOptions","showFirstLastButtons"],[1,"empty-icon"]],template:function(t,r){t&1&&(o(0,"div",0)(1,"mat-card",1)(2,"mat-card-content"),p(3,Le,9,0,"div",2),o(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),a(7,"Search clients"),i(),o(8,"input",5),_("input",function(C){return r.onSearchChange(C)}),i(),o(9,"mat-icon",6),a(10,"search"),i()()(),p(11,Ee,4,1,"div",7)(12,Ie,4,0,"div",8)(13,$e,14,4)(14,We,8,1,"div",9),i()()()),t&2&&(l(3),g(r.isAdmin()?3:-1),l(5),m("value",r.searchTerm()),l(3),g(r.error()?11:-1),l(),g(r.loading()?12:-1),l(),g(!r.loading()&&r.clients().length>0?13:-1),l(),g(!r.loading()&&r.clients().length===0&&!r.error()?14:-1))},dependencies:[B,W,be,de,ge,fe,Ce,pe,he,_e,ue,xe,Me,ce,le,oe,ie,te,Z,ee,ne,w,v,K,J,G,Y,Q,X,me,se,T,S,re,k],styles:[".client-list-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.client-list-card[_ngcontent-%COMP%]{box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f;border-radius:12px;overflow:hidden}.navigation-actions-bar[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center;margin-bottom:24px;flex-wrap:wrap}.navigation-actions-bar[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%], .navigation-actions-bar[_ngcontent-%COMP%]   .add-user-button[_ngcontent-%COMP%]{height:40px;min-width:180px}.navigation-actions-bar[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .navigation-actions-bar[_ngcontent-%COMP%]   .add-user-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.navigation-actions-bar[_ngcontent-%COMP%]   .add-user-button[_ngcontent-%COMP%]{background-color:#ff9800;color:#fff}.navigation-actions-bar[_ngcontent-%COMP%]   .add-user-button[_ngcontent-%COMP%]:hover{background-color:#f57c00}.search-actions-bar[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-start;flex-wrap:wrap}.search-actions-bar[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{flex:1;min-width:300px}.search-actions-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:56px;min-width:120px}.search-actions-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:16px;background-color:#ffebee;border:1px solid #ffcdd2;border-radius:8px;color:#c62828;margin-bottom:16px}.error-message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.25rem;width:1.25rem;height:1.25rem}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;gap:16px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:1rem}.table-container[_ngcontent-%COMP%]{overflow-x:auto;border-radius:8px;border:1px solid #e0e0e0;margin-bottom:16px}.clients-table[_ngcontent-%COMP%]{width:100%;background:#fff}.clients-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f5f5f5;font-weight:600;color:#333;border-bottom:2px solid #e0e0e0;text-align:center}.clients-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #f0f0f0;text-align:center}.clients-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.clients-table[_ngcontent-%COMP%]   .username-cell[_ngcontent-%COMP%], .clients-table[_ngcontent-%COMP%]   .email-cell[_ngcontent-%COMP%], .clients-table[_ngcontent-%COMP%]   .date-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.clients-table[_ngcontent-%COMP%]   .username-cell[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .clients-table[_ngcontent-%COMP%]   .email-cell[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .clients-table[_ngcontent-%COMP%]   .date-cell[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1rem;width:1rem;height:1rem;color:#666}.clients-table[_ngcontent-%COMP%]   .user-icon[_ngcontent-%COMP%]{color:#2196f3!important}.clients-table[_ngcontent-%COMP%]   .email-icon[_ngcontent-%COMP%]{color:#ff9800!important}.clients-table[_ngcontent-%COMP%]   .date-icon[_ngcontent-%COMP%]{color:#4caf50!important}.user-type-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:16px;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.user-type-badge.user-type-admin[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2}.user-type-badge.user-type-client[_ngcontent-%COMP%]{background-color:#e8f5e8;color:#388e3c}.user-type-badge.user-type-delivery[_ngcontent-%COMP%]{background-color:#fff3e0;color:#f57c00}.pagination[_ngcontent-%COMP%]{margin-top:16px;border-top:1px solid #e0e0e0;padding-top:16px}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;text-align:center}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:4rem;width:4rem;height:4rem;color:#ccc;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#666;font-size:1.25rem;font-weight:500}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#999;font-size:1rem;max-width:400px;line-height:1.5}@media (max-width: 768px){.navigation-actions-bar[_ngcontent-%COMP%], .search-actions-bar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:0}.navigation-actions-bar[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%], .search-actions-bar[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{min-width:unset}.clients-table[_ngcontent-%COMP%]{font-size:.875rem}.username-cell[_ngcontent-%COMP%], .email-cell[_ngcontent-%COMP%], .date-cell[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:4px}.username-cell[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .email-cell[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .date-cell[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:none}}.meals-config[_ngcontent-%COMP%]{display:flex;justify-content:center}.meals-config[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:start}@media (max-width: 480px){.clients-table[_ngcontent-%COMP%]{font-size:.75rem}.user-type-badge[_ngcontent-%COMP%]{font-size:.625rem;padding:2px 8px}}.clickable-row[_ngcontent-%COMP%]{cursor:pointer;transition:background-color .2s ease}.clickable-row[_ngcontent-%COMP%]:hover{background-color:#0000000a}.clickable-row[_ngcontent-%COMP%]:active{background-color:#00000014}"],changeDetection:0})};export{ye as ClientListComponent};
